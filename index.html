<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Gizra</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
  <meta name="author" content="Hakim El Hattab">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/black.css" id="theme">
  <link href="//fonts.googleapis.com/css?family=Abril+Fatface" rel="stylesheet" type="text/css">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>

  <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

            <!-- Apology  -->
            <section>
              <h1>üòû</h1>
              <aside class="notes" data-markdown>
                * I never start with an apology, but this time I feel you deserve to get one.
                * As, well, that's embarrasing. I didn't prepare a presentation
                * But you have to understand how severe it is:
                * I've traveled all the way from Israel, almost 10,000KM
                * It costs hundereds of dollars, not to mention the carbon footprint
                * My wife is now alone with my three kids
                * The event organizer, who worked hard to prepare this event, have promised you an interesting technical keyonote
                * But I didn't prepare a presentation.
              </aside>
            </section>

            <section>
              <h1>üòû</h1>
              <div class="">
                „Åî„ÇÅ„Çì„Å™„Åï„ÅÑ
              </div>
              <aside class="notes" data-markdown>
                * Gomen'nasai
              </aside>
            </section>

            <section>
              <div style="padding: 20px;">
                <h2>2067</h2>
              </div>
              <aside class="notes" data-markdown>
                * Fast forward 50 years
                * We have flying cars
                * Aliens have made first contact ...
              </aside>

            </section>

            <!-- Justin Bieber -->
            <section data-background="https://cloud.githubusercontent.com/assets/125707/21801463/6aa57284-d72a-11e6-8b4d-49523f8899bd.jpg">
              <div style="background-color: black; opacity: 0.75; padding: 20px;">
                <h2>2067</h2>
              </div>

              <aside class="notes" data-markdown>
                * ... and President elect Justin bieber is warning against intergalactic war
                * Then, one of your granchildren asks you. Grandpa, or Grandma.
                * Do you remember there was 50 years ago a Drupal camp in Tokyo.
                * Drupal.. Drupal.. Wow, you haven't heard that word for years
                * Grandpa, Grandma - do you remember how fast Drupal 8 was in comparison to Drupal 7.
                Or the difference between Filter and Contextual filter in views? Or which checkbox to check
                to get url alias to work.
                * I think you won't remember.
                * So Granpa, Grandma what do you remember?
                * Suddenly you'll remember the idiot that came all the way to Japan, but forgot to prepare a presentation.
                * And you see, I didn't have to do much for you to remember this. In fact I had to do very little - I had
                  to _not_ prepare anything.
                * But don't worry, we're in 2017, no flying cars ,no alien, and no integalctic war.
              </aside>
            </section>


            <!-- Post-truth era -->
            <section data-background="https://cloud.githubusercontent.com/assets/125707/21800412/359ff7d4-d726-11e6-9786-b5165ad8ef70.jpg">
              <aside class="notes" data-markdown>
                * I mean, so far no integalctic war. But, stay tuned.
              </aside>
            </section>

            <section>
                <h4>Elm, OG8, Price Offers, Proof of Concepts</h4>
                <small>and other relatively accurate stories</small>
                <aside class="notes" data-markdown>
                    * While it's a techincal presentation, you don't need to understand every line of code.
                    * My goal is show you different concepts that are useful for me and my company, and might be useful for you as-well.
                    * And what's most important is for me to make it approachable for you. You don't have to be a Drupal
                    , or Elm, or JS ninja to start it. You just need to do the first step.
                </aside>
            </section>

            <!-- About  -->
            <section data-background="https://cloud.githubusercontent.com/assets/125707/12092123/dd49649a-b303-11e5-9355-e49a3881f5bd.png">
                <span style="background-color: black; opacity: 0.85; padding: 20px 40px;">
                    <span style="font-family: Abril Fatface; color: #e27058; font-size: 50px;">
                        gizra
                    </span>
                    <span>// @amitaibu</span>
                </span>

                <aside class="notes" data-markdown>
                </aside>
            </section>

            <section>
                <h2>The Gizra stack</h2>
                <ul>
                    <li>Drupal</li>
                    <li>Elm</li>
                    <li>Yesod (Haskell)</li>
                </ul>

                <aside class="notes" data-markdown>
                    * I call it the Gizra stack, because it's quite unique.
                    * And before we dive into what Elm is ..
                </aside>
            </section>

            <!-- Budget Googles -->
            <section>
                <img src="https://cloud.githubusercontent.com/assets/125707/20650852/5836e1d4-b4e1-11e6-870c-d9387fd5ae74.jpg" alt="" />

                <aside class="notes" data-markdown>
                  * To give some context, here's our price offer
                  * Not long ago we have finally understood that budget dictates the project
                  * That is, we treat every project as a fixed price. No matter if you are getting as time and material, there's always some pre-determined budget behind
                  * (Unless you are very lucky, and have a client with endless money that never ends, and in that case, make sure not to tell me about them, as I'll try to still them from you)
                  * The reason we say budget dictates the project, no matter how many features a client imagines, you are able to do only that ones they are going to pay for.
                  * A client always imagines they will get more. $20K worth of functionality. And that's a problem, because you don't want them to get dissapointed
                  * How do you set expectations? How do you communicate exactly what they will get.
                  * We call it budget googles.
                  * Navbar should be done in 4 hours, Period. I want to be accurate.
                  * Why do I insisit on this point?
                </aside>
            </section>

            <section>
                <h2>Clients pay for the features</h2>
                <small>not the bugs</small>
                <aside class="notes" data-markdown>
                    * Bugs are very costly (even more than they might appear)
                    * Need to fix, costs you money
                    * Takes your time - deadline
                    * Client disapointed. Mechanic example
                    * As developers we expect the client be ok over and over with the fact that breaks are not working.
                    * Devs/ Account manager moral
                </aside>
            </section>

            <section>
                <h2>Articulate the problem</h2>
                <small>It's not about fighting bugs. It's about setting our priorities</small>

                <aside class="notes" data-markdown>
                    * I don't care about concurrency
                    * I don't care about performance
                    * I don't care about micro services architecture
                    * I care about preventing regressions, because we don't get
                    paid for those.
                </aside>
            </section>

            <section>
                <h2>Correctness</h2>
                <small>and my expectations from computers</small>
                <aside class="notes" data-markdown>
                    * My expectations of computer and programming languages after being in the
                    functional programming world for 2 years.
                </aside>
            </section>

            <section>
                <h2>Elm</h2>
                <small>Generate JavaScript with great performance and no runtime exceptions</small>

                <aside class="notes" data-markdown>
                    * Functional programming language. It compiles to JS. But it's not Typescirpt
                    * It doesn't try to fix JS. But rather say, JS is wonderful, but as humans we shouldn't interact with it.
                    * Staticlly typed. It has an amazing compiler which makes sure there are no runtime errors. It's immutable.
                    * In general after years of Angualr 1, and playing a bit with React, Front end has became fun again.
                    * I'm going to show you the craziest web app you ever seen. Ready?
                </aside>
            </section>

      <!-- Counter Example -->
      <section>
        <img src="https://cloud.githubusercontent.com/assets/125707/9739824/2fcc8cd0-565a-11e5-8024-0d01200773cd.jpg" />
      </section>

      <section>
        <pre style="width: 100%;"><code data-trim class>
module Counter exposing (..)

import Html exposing (..)
import Html.Attributes exposing (..)
import Html.Events exposing (onClick)

-- MODEL

type alias Model =
    Int

emptyModel : Model
emptyModel =
    0

-- UPDATE

type Msg
    = Decrement
    | Increment


update : Msg -> Model -> ( Model, Cmd Msg )
update msg model =
    case msg of
        Decrement ->
            ( model - 1
            , Cmd.none
            )

        Increment ->
            ( model + 1
            , Cmd.none
            )

-- VIEW

view : Model -> Html Msg
view model =
    div []
        [ button [ onClick Decrement ] [ text "-" ]
        , div [] [ text (toString model) ]
        , button [ onClick Increment ] [ text "+" ]
        ]

        </code></pre>
        <aside class="notes" data-markdown>
       </aside>
      </section>

    <!-- Compiler assitance -->
    <section>
        <img src="https://cloud.githubusercontent.com/assets/125707/20651071/8335f4e2-b4e6-11e6-801a-99c5c262673f.jpg" alt="" />
    </section>


      <section>
        <pre>
          <code class="elm" data-trim>
--

type alias User =
    { avatarUrl : String
    , name : String
    }

viewAvatar : String -> Html a
viewAvatar url =
    img [ src url ] []


--
          </code>
        </pre>
        <aside class="notes" data-markdown>
          * Lets setup one level
          * This looks ok, and it compiles.
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>
--

type alias User =
    { avatarUrl : String
    , name : String
    }

viewAvatar : String -> Html a
viewAvatar url =
    img [ src url ] []


main = viewAvatar "But this isn't a URL!"
          </code>
        </pre>
        <aside class="notes" data-markdown>
          * Wrong value
              </aside>
      </section>


      <section>
        <h3>Compile Error Vs Runtime Mistakes</h3>

        <aside class="notes" data-markdown>
          * No Runtime errors in Elm
          * Shift as much runtime mistakes to compile time error
        </aside>
      </section>

      <section>
        <h2>Types 101</h2>
      </section>

      <!-- Bool type -->
      <section>
        <pre>
          <code class="elm" data-trim>
type Bool = False | True
          </code>
        </pre>
      </section>

      <!-- User type -->
      <section>
        <pre>
          <code class="elm" data-trim>
type UserType = Anonymous | Authenticated String | Premium String Date
          </code>
        </pre>
        <aside class="notes" data-markdown>
          * User type can be either one.
          * Pending and Authenticated are wrapping a value.
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>
--

type alias User =
    { avatarUrl : String
    , name : String
    }

viewAvatar : String -> Html a
viewAvatar url =
    img [ src url ] []


--
          </code>
        </pre>
        <aside class="notes" data-markdown>
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>
type Url = Url String

type alias User =
    { avatarUrl : Url
    , name : String
    }

viewAvatar : Url -> Html a
viewAvatar url =
    let
        (Url val) = url
    in
        img [ src val ] []
          </code>
        </pre>
      </section>

      <section>
        <img src="https://cloud.githubusercontent.com/assets/125707/16045523/727ba1c8-3251-11e6-8707-1cfb30ba4173.jpg" alt="" />
      </section>

      <section>
        <h2>Maybe values</h2>
        <small>!empty(), you will not be missed</small>
      </section>

      <!-- User type Url -->
      <section>
        <pre>
          <code class="elm" data-trim>
type alias User =
    { avatarUrl : Url
    , name : String
    }

emptyUser =
    { avatarUrl = Url ""
    , name = ""
    }

type alias Model =
    { user : User
    }

emptyModel =
    { user = emptyUser
    }
          </code>
        </pre>

        <aside class="notes" data-markdown>
          * Example without Maybe. But this is wrong.
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>
type alias Model =
    { user : Maybe User
    }

emptyModel =
    { user = Nothing
    }
          </code>
        </pre>

        <aside class="notes" data-markdown>
          * We know there is no User.
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>

type alias Model =
    { user : Maybe User
    }

emptyModel =
    { user = Just <| User "https://example.com/avatar" "amitaibu"
    }
          </code>
        </pre>

        <aside class="notes" data-markdown>
          * The use of "Just"
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>
{-|
  * `NotAsked` - We haven't asked for the data yet.
  * `Loading` - We've asked, but haven't got an answer yet.
  * `Failure` - We asked, but something went wrong. Here's the error.
  * `Success` - Everything worked, and here's the data.
-}
type RemoteData e a
    = NotAsked
    | Loading
    | Failure e
    | Success a

type alias WebData a =
    RemoteData Http.Error a
          </code>
        </pre>

        <aside class="notes" data-markdown>
          * A common pattern in Elm
          * It helps us to re-think with types
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>
type alias Model =
    { user : WebData User
    }


emptyModel =
    { user = NotAsked
    }

debugUser =
    { user = Success <| User "https://example.com/avatar" "amitaibu"
    }
          </code>
        </pre>

        <aside class="notes" data-markdown>
          * Using webdata, starting with NotAsked
          * How easy to put a spinner, because you have the exact state.
        </aside>
      </section>


      <!-- Translation -->
      <section>
        <img src="http://www.gizra.com/assets/images/posts/elm-i18n/image1.gif" alt="" />

        <aside class="notes" data-markdown>
            * Learn how to re-think with types
        </aside>
      </section>

      <section>
        <pre>
          <code class="elm" data-trim>
type Language
    = English
    | Spanish


type TranslationId
    = Login
    | WelcomeBack { name : String }


type alias TranslationSet =
    { english : String
    , spanish : String
    }


translations : TranslationId -> TranslationSet
translations id =
    case id of
        Login ->
            { english = "Please login"
            , spanish = "Por favor haga login"
            }

        WelcomeBack val ->
            { english = "Welcome back " ++ val.name
            , spanish = "Bienvenido " ++ val.name
            }


translate : Language -> TranslationId -> String
translate lang id =
    case lang of
        English ->
            .english <| translations id

        Spanish ->
            .spanish <| translations id

          </code>
        </pre>

        <aside class="notes" data-markdown>
          * Using webdata, starting with NotAsked
        </aside>
      </section>

            <!-- elm-package diff -->
            <section>
                <img src="https://cloud.githubusercontent.com/assets/125707/20682288/10353f28-b5b0-11e6-9e49-afc4b980afc1.jpg" alt="" />
            </section>

            <!-- Budget Googles -->
            <section>
                <img src="https://cloud.githubusercontent.com/assets/125707/20650852/5836e1d4-b4e1-11e6-870c-d9387fd5ae74.jpg" alt="" />

                <aside class="notes" data-markdown>
                  * Circle back to our budget googles.
                  * Many advantages, but still one big disadvantage: TMI: Too much infomation
                </aside>
            </section>

            <!-- BOA -->
            <section>
               <img src="https://cloud.githubusercontent.com/assets/125707/21800221/521feffa-d725-11e6-9489-c2ab5ddcea16.gif" alt="" />

               <aside class="notes" data-markdown>
                 * New technique we are using as pre-sale is create proof of concepts.
                 * Post Truth era. I don't think they will rememer it in 50 years,
                 but hopefuly remember enough time for choosing us.
               </aside>
            </section>

            <!-- Yesod -->
            <section>
                <img src="https://cloud.githubusercontent.com/assets/125707/20651098/0daf5924-b4e7-11e6-846d-5f8f7a7abe37.jpg" alt="" />
            </section>

            <section>
                <div class="">
                    What can possibly go wrong?
                </div>
                <pre>
                    <code class="php" data-trim>
drupal_add_css('static/css/bootstrap.css');
                    </code>
                </pre>
                <pre>
                    <code class="elm" data-trim>
addStylesheet $ StaticR css_bootstrap_css
                    </code>
                </pre>
            </section>

            <section>
                <h2>Finally! Drupal (8)!</h2>
        <aside class="notes" data-markdown>
                    * What keeps me excited
        </aside>
            </section>

            <section>
                <h2>OG8</h2>
                <aside class="notes" data-markdown>
                </aside>
            </section>

            <!-- OG8 data structure -->
            <section>
              <img src="http://www.gizra.com/assets/images/posts/og8-development-mindset/image2.jpg" alt="" />
              <aside class="notes" data-markdown>
                  * As simple as it looks, I was actually able to get it wrong. Twice.
                  * First a group was it own entity, and after membership was used also for non-users.
                  * There were good reasons why I did it, but they were wrong
                  * ... and the next slide shows what was wrong.
              </aside>
            </section>

            <!-- PR removes code -->
            <section>
                <img src="https://cloud.githubusercontent.com/assets/125707/20651123/985dab0c-b4e7-11e6-9ae3-e01104c31cbc.jpg" alt="" />
                <aside class="notes" data-markdown>
                    * The minset. Trying to add more features.
                    * No code, less code to maintin, don't lose time, less chance for bugs.
                </aside>
            </section>

            <!-- Safe guards -->
            <section>
                <h2>Safe Guards</h2>
                <pre>
                  <code class="elm" data-trim>
        throw new \Exception();
                  </code>

                </pre>

                <img src="https://cloud.githubusercontent.com/assets/125707/20651142/dca0c8e4-b4e7-11e6-957e-2ee78b2cfc44.jpg" alt="" />

                <aside class="notes" data-markdown>
                    * But who to prevent wrong data if there's no compiler, or types?
                </aside>
            </section>

            <section>
                <h2>Be your own devil's advocate</h2>

                <iframe src="//giphy.com/embed/b5JsLz7ENp9m" width="480" height="363" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
            </section>

            <section>
              <ul>
                  <li>Functional testing</li>
                  <li>Kernel testing</li>
                  <li>Unit testing</li>
              </ul>
            </section>

      <!-- Functional test -->
      <section>
        <pre>
          <code class="php" data-trim>
/**
 * Tests the formatter changes by user and membership.
 */
public function testGroupTab() {
  $this->drupalLogin($this->user1);
  $this->drupalGet('group/node/' . $this->group->id() . '/admin');
  $this->assertResponse(200);

  $this->drupalGet('group/node/' . $this->nonGroup->id() . '/admin');
  $this->assertResponse(403);
}
          </code>
        </pre>
      </section>

      <!-- Kernel test -->
      <section>
        <pre>
          <code class="php" data-trim>
/**
 * Tests access to the create entity form through the user interface.
 *
 * @group og
 * @coversDefaultClass \Drupal\og\Form\GroupSubscribeForm
 */
class GroupSubscribeFormTest extends KernelTestBase {

  /**
   * {@inheritdoc}
   */
  public static $modules = [
    'system',
    'user',
    'field',
    'node',
    'og',
  ];

  /**
   * A user object.
   *
   * @var \Drupal\user\Entity\User
   */
  protected $user1;


  /**
   * A group entity.
   *
   * @var \Drupal\node\Entity\Node
   */
  protected $group1;

  /**
   * A group entity.
   *
   * @var \Drupal\node\Entity\Node
   */
  protected $group2;

  /**
   * A group entity.
   *
   * @var \Drupal\node\Entity\Node
   */
  protected $group3;

  /**
   * {@inheritdoc}
   */
  protected function setUp() {
    parent::setUp();

    $this->installConfig(['og']);
    $this->installEntitySchema('og_membership');
    $this->installEntitySchema('user');
    $this->installEntitySchema('node');
    $this->installSchema('system', 'sequences');

    // Create bundles.
    $groupBundle1 = Unicode::strtolower($this->randomMachineName());
    $groupBundle2 = Unicode::strtolower($this->randomMachineName());
    $groupBundle3 = Unicode::strtolower($this->randomMachineName());

    // Define the entities as groups.
    Og::groupTypeManager()->addGroup('node', $groupBundle1);
    Og::groupTypeManager()->addGroup('node', $groupBundle2);
    Og::groupTypeManager()->addGroup('node', $groupBundle3);

    // Create node author user.
    $user = User::create(['name' => $this->randomString()]);
    $user->save();

    // Create groups.
    $this->group1 = Node::create([
      'type' => $groupBundle1,
      'title' => $this->randomString(),
      'uid' => $user->id(),
    ]);
    $this->group1->save();

    $this->group2 = Node::create([
      'type' => $groupBundle2,
      'title' => $this->randomString(),
      'uid' => $user->id(),
    ]);
    $this->group2->save();

    // Create an unpublished node, so users won't have access to it.
    $this->group3 = Node::create([
      'type' => $groupBundle3,
      'title' => $this->randomString(),
      'uid' => $user->id(),
      'status' => NODE_NOT_PUBLISHED,
    ]);
    $this->group3->save();

    // Change the permissions of group to "subscribe".
    /** @var OgRole $role */
    $role = OgRole::getRole('node', $groupBundle1, OgRoleInterface::ANONYMOUS);
    $role
      ->grantPermission('subscribe')
      ->save();

    // Change the permissions of group to allow "subscribe without approval".
    $role = OgRole::getRole('node', $groupBundle2, OgRoleInterface::ANONYMOUS);
    $role
      ->grantPermission('subscribe without approval')
      ->save();

    // Change the permissions of group to allow "subscribe without approval" on
    // the unpublished node.
    $role = OgRole::getRole('node', $groupBundle3, OgRoleInterface::ANONYMOUS);
    $role
      ->grantPermission('subscribe without approval')
      ->save();

  }

  /**
   * Tests subscribe confirmation related text.
   *
   * @covers ::isStateActive
   */
  public function testIsStateActive() {
    $user = $this->createUser(['access content']);

    /** @var GroupSubscribeForm $form */
    $form = \Drupal::entityManager()->getFormObject('og_membership', 'subscribe');

    // Pending membership.
    $membership_pending = OgMembership::create();
    $membership_pending
      ->setGroup($this->group1)
      ->setUser($user);

    $form->setEntity($membership_pending);
    $this->assertFalse($form->isStateActive());
  }
          </code>
        </pre>
      </section>

      <!-- Unit test -->
      <section>
        <pre>
          <code class="php" data-trim>
/**
 * Tests the group check access.
 *
 * @group og
 * @coversDefaultClass \Drupal\og\Access\GroupCheck
 */
class GroupCheckTest extends UnitTestCase {

  /**
   * The entity type manager prophecy used in the test.
   *
   * @var \Drupal\Core\Entity\EntityTypeManagerInterface|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $entityTypeManager;

  /**
   * The entity type prophecy used in the test.
   *
   * @var \Drupal\Core\Entity\EntityTypeInterface|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $entityType;

  /**
   * The entity storage prophecy used in the test.
   *
   * @var \Drupal\Core\Entity\EntityStorageInterface|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $entityStorage;

  /**
   * The OG access service prophecy used in the test.
   *
   * @var \Drupal\og\OgAccess|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $ogAccess;

  /**
   * The route service prophecy used in the test.
   *
   * @var \Symfony\Component\Routing\Route|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $route;

  /**
   * A user used in the test.
   *
   * @var \Drupal\user\UserInterface|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $user;

  /**
   * The entity type ID of the test group.
   *
   * @var string
   */
  protected $entityTypeId;

  /**
   * The bundle ID of the test group.
   *
   * @var string
   */
  protected $bundle;

  /**
   * The test group entity used in the test..
   *
   * @var \Drupal\Core\Entity\EntityInterface|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $group;

  /**
   * A random entity ID.
   *
   * @var int
   */
  protected $entityId;

  /**
   * The group manager used in the test.
   *
   * @var \Drupal\og\GroupTypeManager|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $groupTypeManager;

  /**
   * The access result used in the test.
   *
   * @var \Drupal\Core\Access\AccessResultInterface|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $accessResult;

  /**
   * The route match service used in the test.
   *
   * @var \\Drupal\Core\Routing\RouteMatchInterface|\Prophecy\Prophecy\ObjectProphecy
   */
  protected $routeMatch;

  /**
   * {@inheritdoc}
   */
  public function setUp() {
    $this->entityTypeManager = $this->prophesize(EntityTypeManagerInterface::class);
    $this->entityType = $this->prophesize(EntityTypeInterface::class);
    $this->entityStorage = $this->prophesize(EntityStorageInterface::class);
    $this->ogAccess = $this->prophesize(OgAccessInterface::class);
    $this->route = $this->prophesize(Route::class);
    $this->routeMatch = $this->prophesize(RouteMatchInterface::class);

    $this->entityTypeId = $this->randomMachineName();
    $this->bundle = $this->randomMachineName();
    $this->entityId = rand(10, 50);
    $this->groupTypeManager = $this->prophesize(GroupTypeManager::class);
    $this->user = $this->prophesize(AccountInterface::class);
    $this->group = $this->prophesize(EntityInterface::class);
    $this->accessResult = $this->prophesize(AccessResultInterface::class);

    $container = new ContainerBuilder();
    $container->set('og.group_type_manager', $this->groupTypeManager->reveal());
    \Drupal::setContainer($container);
  }

  /**
   * Tests a non-existing group.
   *
   * @covers ::access
   */
  public function testNoGroup() {
    $this
      ->entityTypeManager
      ->getDefinition($this->entityTypeId, FALSE)
      ->willReturn($this->entityType);

    $this
      ->entityTypeManager
      ->getStorage($this->entityTypeId)
      ->willReturn($this->entityStorage);

    $this->entityStorage
      ->load($this->entityId)
      ->willReturn(NULL);

    $group_check = new GroupCheck($this->entityTypeManager->reveal(), $this->ogAccess->reveal());
    $result = $group_check->access($this->user->reveal(), $this->route->reveal(), $this->routeMatch->reveal(), $this->entityTypeId, $this->entityId);

    $this->assertTrue($result->isForbidden());
  }
}
          </code>
        </pre>

        <aside class="notes" data-markdown>
            * Out of 120 files, OG8 has 50 test files
        </aside>

      </section>

      <section>
          <h2>Port Drupal to Haskell?</h2>
          <small>no!</small>

          <aside class="notes" data-markdown>
              * Approchable
              * The huge community
              * Eco-system, Pantheon/ Platform/ Amazee IO
              * Monthly releases
              * Wednesday security releases
              * Association
              * Drush/ Drupal console
              * Tons of code we didn't have to write, or test
              * 15 years of code - Experience!
          </aside>
      </section>

      <!-- Unio -->
      <section>
        <img src="https://cloud.githubusercontent.com/assets/125707/21800742/a35832fe-d727-11e6-9247-410fc3591c7e.gif" alt="" />

        <aside class="notes" data-markdown>
            * Everything that you are seeing didn't exist 2.5 month ago
            * Drupal allowed us to quickly scafolld a new installation profile,
            with migrate and OG and RESTful. This is D7.
            * And in Elm it allowed us to move fast without having the fear of breaking old code, and painfull regressions.
        </aside>
      </section>

      <!-- Unio Backend -->
      <section>
        <img src="https://cloud.githubusercontent.com/assets/125707/21800832/fe50264e-d727-11e6-9fe8-6a4d88f379cd.jpg" alt="" />
      </section>

      <section>
        <img src="https://cloud.githubusercontent.com/assets/125707/21802323/fcb4e440-d72d-11e6-8cb0-c90d9e0d34f8.jpg" alt="" />
      </section>

      <!-- Last slide -->
      <section data-background="https://cloud.githubusercontent.com/assets/125707/11408842/6abc3708-93c4-11e5-8515-bf92a59cf8ea.jpg">
        <div style="background-color: black; opacity: 0.85; padding: 20px;">
          <span style="font-family: Abril Fatface; color: #e27058; font-size: 50px;">
            gizra
          </span>
        </div>
      </section>


    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>

  <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: false,
      progress: false,
      history: true,
      center: true,

      transition: 'none', // none/fade/slide/convex/concave/zoom

      // Optional reveal.js plugins
      dependencies: [{
        src: 'lib/js/classList.js',
        condition: function() {
          return !document.body.classList;
        }
      }, {
        src: 'plugin/markdown/marked.js',
        condition: function() {
          return !!document.querySelector('[data-markdown]');
        }
      }, {
        src: 'plugin/markdown/markdown.js',
        condition: function() {
          return !!document.querySelector('[data-markdown]');
        }
      }, {
        src: 'plugin/highlight/highlight.js',
        async: true,
        callback: function() {
          hljs.initHighlightingOnLoad();
        }
      }, {
        src: 'plugin/zoom-js/zoom.js',
        async: true
      }, {
        src: 'plugin/notes/notes.js',
        async: true
      }, {
        src: 'socket.io/socket.io.js',
        async: true
      }, {
        src: 'plugin/notes-server/client.js',
        async: true
      }]
    });
  </script>

</body>

</html>
